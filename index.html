<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#0a0a0a">
    <title>Street League</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Russo+One&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS —Ñ–∞–π–ª—ã -->
    <link rel="stylesheet" href="./css/variables.css">
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/components.css">
    <link rel="stylesheet" href="./css/screens.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://api-maps.yandex.ru/2.1/?apikey=–≤–∞—à_api_–∫–ª—é—á&lang=ru_RU"></script>
</head>
<body>
    <div class="bg-pattern"></div>
    
    <main id="app-container">
        <!-- Screen: Role Selection -->
        <section id="screen-role" class="screen active">
            <div class="auth-container">
                <h1 class="logo">STREET LEAGUE</h1>
                <p class="subtitle">–í—ã–±–µ—Ä–∏ —Å–≤–æ–π –ø—É—Ç—å</p>

                <div class="role-selector">
                    <button class="role-option active" data-role="fan" onclick="app.selectRole('fan')">
                        –ë–æ–ª–µ–ª—å—â–∏–∫
                    </button>
                    <button class="role-option pro" data-role="organizer" onclick="app.selectRole('organizer')">
                        <span class="role-badge-small">PRO</span>
                        –û—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä
                    </button>
                </div>

                <div class="role-info" id="role-info-fan">
                    <div class="role-header">
                        <i class="fas fa-eye role-icon"></i>
                        <span class="role-title">–ë–µ—Å–ø–ª–∞—Ç–Ω–æ</span>
                    </div>
                    <p class="role-desc">–°–ª–µ–¥–∏ –∑–∞ –º–∞—Ç—á–∞–º–∏ –∏ –∫–æ–º–∞–Ω–¥–∞–º–∏</p>
                    <div class="feature-tags">
                        <span class="feature-tag">–ü—Ä–æ—Å–º–æ—Ç—Ä –º–∞—Ç—á–µ–π</span>
                        <span class="feature-tag">–ö–∞—Ä—Ç–∞ –ø–ª–æ—â–∞–¥–æ–∫</span>
                        <span class="feature-tag disabled">–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥</span>
                    </div>
                </div>

                <div class="role-info hidden" id="role-info-organizer" style="border-color: var(--accent-gold);">
                    <div class="role-price-tag">299 ‚ÇΩ</div>
                    <div class="role-price-period">–≤ –º–µ—Å—è—Ü</div>
                    <p class="role-desc">–°–æ–∑–¥–∞–≤–∞–π –∫–æ–º–∞–Ω–¥—ã –∏ –º–∞—Ç—á–∏</p>
                    <div class="feature-tags">
                        <span class="feature-tag gold">–í—Å—ë –∏–∑ –ë–æ–ª–µ–ª—å—â–∏–∫–∞</span>
                        <span class="feature-tag gold">–î–æ 3 –∫–æ–º–∞–Ω–¥</span>
                        <span class="feature-tag gold">–ë—Ä–æ—Å–∫–∏ –≤—ã–∑–æ–≤–∞</span>
                    </div>
                </div>

                <button class="btn btn-primary" id="continue-btn" onclick="app.goToAuth()">
                    –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                </button>
				<button class="btn btn-secondary" onclick="app.showLogin()" style="margin-top: 10px;">
    –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? –í–æ–π—Ç–∏
</button>
            </div>
        </section>

        <!-- Screen: Auth -->
        <section id="screen-auth" class="screen">
            <div class="auth-container">
                <button class="back-btn" onclick="app.backToRole()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                
                <h1 class="logo">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</h1>
                <p class="subtitle" id="auth-subtitle">–°–æ–∑–¥–∞–π –∞–∫–∫–∞—É–Ω—Ç</p>

                <form id="auth-form" onsubmit="event.preventDefault(); app.register();">
                    <div class="form-group">
                        <label>–ù–∏–∫–Ω–µ–π–º</label>
                        <input type="text" id="reg-nickname" placeholder="–ü—Ä–∏–¥—É–º–∞–π –Ω–∏–∫" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="reg-email" placeholder="email@example.com" required>
                    </div>
                    
                    <div class="form-group">
                        <label>–ü–∞—Ä–æ–ª—å</label>
                        <input type="password" id="reg-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required minlength="6">
                    </div>

                    <div class="form-group hidden" id="phone-field">
                        <label>–¢–µ–ª–µ—Ñ–æ–Ω <span class="hint">(–¥–ª—è –∫–∞–ø–∏—Ç–∞–Ω–æ–≤)</span></label>
                        <input type="tel" id="reg-phone" placeholder="+7 (999) 000-00-00">
                    </div>

                    <button type="submit" class="btn btn-primary" id="reg-btn">–°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
                    <button type="submit" class="btn btn-gold hidden" id="pay-btn">
                        –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É 299 ‚ÇΩ/–º–µ—Å
                    </button>
                </form>
            </div>
        </section>

<section id="screen-login" class="screen">
    <div class="auth-container">
        <button class="back-btn" onclick="app.backToRole()">
            <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
        </button>
        
        <h1 class="logo">–í–•–û–î</h1>
        <p class="subtitle">–í–æ–π–¥–∏ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç</p>

        <form id="login-form" onsubmit="event.preventDefault(); app.handleLogin();">
            <div class="form-group">
                <label>Email</label>
                <input type="email" id="login-email" placeholder="email@example.com" required>
            </div>
            
            <div class="form-group">
                <label>–ü–∞—Ä–æ–ª—å</label>
                <input type="password" id="login-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                <div style="text-align: right; margin-top: 5px;">
                    <a href="#" onclick="app.showForgotPassword()" style="color: var(--accent-blue); font-size: 0.8rem;">
                        –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
                    </a>
                </div>
            </div>

            <button type="submit" class="btn btn-primary" id="login-btn">
                –í–æ–π—Ç–∏
            </button>
            
            <div style="text-align: center; margin-top: 20px;">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">
                    –ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? 
                </span>
                <a href="#" onclick="app.goToAuth()" style="color: var(--accent-green); font-weight: 500;">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </a>
            </div>
        </form>
    </div>
</section>

        <!-- Screen: City -->
        <section id="screen-city" class="screen">
            <div class="auth-container">
                <h1 class="logo">–í–´–ë–ï–†–ò –ì–û–†–û–î</h1>
                <p class="subtitle">–ì–¥–µ —Ç—ã –∏–≥—Ä–∞–µ—à—å?</p>
                <div class="city-grid" id="city-list"></div>
            </div>
        </section>

        <!-- Screen: Main -->
        <section id="screen-main" class="screen">
            <header class="header">
                <button class="city-selector" onclick="app.showCitySelection()">
                    <i class="fas fa-map-marker-alt"></i>
                    <span id="current-city-name">–ì–æ—Ä–æ–¥</span>
                    <i class="fas fa-chevron-down"></i>
                </button>
                <button class="user-avatar" onclick="app.showProfile()">
                    <span id="avatar-letter">U</span>
                    <span class="pro-badge hidden" id="pro-badge">PRO</span>
                </button>
            </header>

            <div id="paywall-banner" class="paywall-banner hidden">
                <div class="paywall-text">
                    <div class="paywall-title">–ü–æ–¥–ø–∏—Å–∫–∞ PRO –∏—Å—Ç–µ–∫–ª–∞</div>
                    <div class="paywall-subtitle">–í–æ–∑–æ–±–Ω–æ–≤–∏ –¥–æ—Å—Ç—É–ø</div>
                </div>
                <button class="paywall-btn" onclick="app.showPayment()">299 ‚ÇΩ</button>
            </div>

            <h2 class="section-title">–ú–∞—Ç—á–∏</h2>

            <div class="filters">
                <button class="filter-btn active" onclick="app.filterSport('all')">–í—Å–µ</button>
                <button class="filter-btn" onclick="app.filterSport('football')">–§—É—Ç–±–æ–ª</button>
                <button class="filter-btn" onclick="app.filterSport('volleyball')">–í–æ–ª–µ–π–±–æ–ª</button>
            </div>

            <div class="matches-list" id="matches-list"></div>

           
        </section>

        <!-- Screen: Hub -->
        <section id="screen-hub" class="screen">
            <div class="container">
                <header class="header">
                    <h2 class="section-title">–•–∞–± —Å–æ–±—ã—Ç–∏–π</h2>
                    <button class="user-avatar" onclick="app.showProfile()">
                        <i class="fas fa-user"></i>
                    </button>
                </header>

                <div class="hub-filters">
                    <button class="hub-filter active" onclick="app.filterHub('all')">–í—Å—ë</button>
                    <button class="hub-filter" onclick="app.filterHub('events')">–°–æ–±—ã—Ç–∏—è</button>
                    <button class="hub-filter" onclick="app.filterHub('matches')">–ú–∞—Ç—á–∏</button>
                    <button class="hub-filter" onclick="app.filterHub('training')">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</button>
                </div>

                <div class="hub-section">
                    <h3 class="hub-section-title">
                        <i class="fas fa-fire"></i>
                        –ë–ª–∏–∂–∞–π—à–∏–µ —Å–æ–±—ã—Ç–∏—è
                    </h3>
                    <div id="hub-events-list" class="hub-list"></div>
                </div>

                <div class="hub-section">
                    <h3 class="hub-section-title">
                        <i class="fas fa-calendar-week"></i>
                        –ú–∞—Ç—á–∏ –Ω–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ
                    </h3>
                    <div id="hub-matches-list" class="hub-list"></div>
                </div>

                <div class="hub-section">
                    <h3 class="hub-section-title">
                        <i class="fas fa-star"></i>
                        –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º
                    </h3>
                    <div id="hub-recommended-list" class="hub-list"></div>
                </div>
            </div>
        </section>

        <!-- Screen: Teams -->
        <section id="screen-teams" class="screen">
            <div class="container">
                <header class="header">
                    <h2 class="section-title">–ú–æ–∏ –∫–æ–º–∞–Ω–¥—ã</h2>
                    <button class="user-avatar" onclick="app.showProfile()">
                        <i class="fas fa-user"></i>
                    </button>
                </header>
                <div class="teams-list" id="teams-list"></div>
                <button class="btn btn-primary" onclick="app.showCreateTeam()" style="margin-top: 20px;">
                    <i class="fas fa-plus"></i> –°–æ–∑–¥–∞—Ç—å –∫–æ–º–∞–Ω–¥—É
                </button>
            </div>
        </section>

        <!-- Screen: Create Team -->
        <section id="screen-create-team" class="screen">
            <div class="container">
                <button class="back-btn" onclick="app.showTeams()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <h2 class="section-title">–ù–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞</h2>
                <form class="form-section" onsubmit="event.preventDefault(); app.createTeam();">
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                        <input type="text" id="team-name" placeholder="–î—Ä–∞–∫–æ–Ω—ã" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–í–∏–¥ —Å–ø–æ—Ä—Ç–∞</label>
                            <select id="team-sport">
                                <option value="football">–§—É—Ç–±–æ–ª</option>
                                <option value="volleyball">–í–æ–ª–µ–π–±–æ–ª</option>
                            </select>
                        </div>
                        <div class="form-group avatar-group">
                            <label>–ò–∫–æ–Ω–∫–∞</label>
                            <input type="text" id="team-avatar" placeholder="üê≤" maxlength="2">
                        </div>
                    </div>
                    <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å</button>
                </form>
            </div>
        </section>

        <!-- Screen: Create Match -->
<section id="screen-create-match" class="screen">
    <div class="container">
        <button class="back-btn" onclick="app.showMain()">
            <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
        </button>
        <h2 class="section-title">–ù–æ–≤—ã–π –º–∞—Ç—á</h2>
        <form class="form-section" onsubmit="event.preventDefault(); app.createMatch();">
            <div class="form-group">
                <label>–ö–æ–º–∞–Ω–¥–∞</label>
                <select id="match-team" required></select>
            </div>
            <div class="form-group">
                <label>–°–æ–ø–µ—Ä–Ω–∏–∫</label>
                <select id="match-opponent">
                    <option value="">–û—Ç–∫—Ä—ã—Ç—ã–π –º–∞—Ç—á</option>
                </select>
            </div>
            
            <!-- –î–û–ë–ê–í–õ–ï–ù–ù–´–ô –ë–õ–û–ö: –§–æ—Ä–º–∞—Ç –∏–≥—Ä—ã -->
            <div class="form-group">
                <label>–§–æ—Ä–º–∞—Ç –∏–≥—Ä—ã</label>
                <select id="match-format" required>
                    <option value="2x2">2 –Ω–∞ 2</option>
                    <option value="3x3">3 –Ω–∞ 3</option>
                    <option value="4x4">4 –Ω–∞ 4</option>
                    <option value="5x5">5 –Ω–∞ 5</option>
                    <option value="7x7">7 –Ω–∞ 7</option>
                    <option value="11x11">11 –Ω–∞ 11</option>
                </select>
            </div>
            
            <div class="form-group">
                <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                <input type="datetime-local" id="match-datetime" required>
            </div>
            <div class="form-group">
                <label>–ú–µ—Å—Ç–æ</label>
                <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <input type="text" id="match-location" placeholder="–°—Ç–∞–¥–∏–æ–Ω" required style="flex: 1;">
                    <button type="button" class="btn btn-secondary" onclick="app.openMapForLocation()" 
                            style="width: auto; padding: 10px 15px; font-size: 0.85rem; white-space: nowrap;">
                        <i class="fas fa-map-marker-alt"></i> –ù–∞ –∫–∞—Ä—Ç–µ
                    </button>
                </div>
                <div id="location-coordinates" style="font-size: 0.85rem; color: var(--text-secondary); padding: 8px 0;">
                    <i class="fas fa-info-circle"></i> –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–µ –≤—ã–±—Ä–∞–Ω—ã
                </div>
            </div>

            <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç -->
            <input type="hidden" id="match-lat">
            <input type="hidden" id="match-lng">

            <button type="submit" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –º–∞—Ç—á</button>
        </form>
    </div>
    
    
</section>

        <!-- Screen: Match Detail -->
        <section id="screen-match" class="screen">
            <div class="container">
                <button class="back-btn" onclick="app.showMain()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>

                <div id="match-detail-content"></div>
                <div id="map" class="map-container"></div>
                <div id="challenges-section" class="challenges-section hidden">
    <!-- –í—ã–∑–æ–≤—ã –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
</div>
                <div id="match-reactions" class="match-reactions"></div>
                
                <div id="challenge-section" class="challenge-section hidden">
                    <button class="btn btn-challenge" onclick="app.challengeTeam()">
                        <i class="fas fa-fire"></i> –ë—Ä–æ—Å–∏—Ç—å –≤—ã–∑–æ–≤
                    </button>
                </div>

                <div class="comments-section">
                    <h3 class="section-subtitle">
                        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ 
                        <span id="comments-count" class="count-badge">0</span>
                    </h3>
                    
                    <div id="comments-list" class="comments-list">
                    </div>

                   <div class="comment-input-area">
    <div class="comment-input-wrapper">
        <input type="text" 
               id="comment-input" 
               placeholder="–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π..." 
               maxlength="200"
               onkeypress="if(event.key === 'Enter') app.addComment(app.selectedMatch.id, this.value)">
        <button class="send-btn" onclick="app.addComment(app.selectedMatch.id, document.getElementById('comment-input').value)">
            <i class="fas fa-paper-plane"></i>
        </button>
    </div>
</div>
                </div>
            </div>
        </section>

        <!-- Screen: Profile -->
        <section id="screen-profile" class="screen">
            <div class="container">
                <button class="back-btn" onclick="app.showMain()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>
                <div class="profile-header">
                    <div class="profile-avatar">
                        <span id="profile-avatar">U</span>
                        <span class="pro-badge hidden" id="profile-pro-badge">PRO</span>
                    </div>
                    <h2 id="profile-name">User</h2>
                    <p id="profile-role" class="profile-role">–ë–æ–ª–µ–ª—å—â–∏–∫</p>
                </div>
                <div id="subscription-card" class="form-section hidden">
                    <h3 class="form-title">–ü–æ–¥–ø–∏—Å–∫–∞ PRO</h3>
                    <div class="info-row">
                        <span class="info-label">–°—Ç–∞—Ç—É—Å</span>
                        <span id="sub-status" class="info-value status-active">–ê–∫—Ç–∏–≤–Ω–∞</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">–î–æ</span>
                        <span id="sub-date" class="info-value">31.12.2024</span>
                    </div>
                    <button class="btn btn-gold" onclick="app.showPayment()">–ü—Ä–æ–¥–ª–∏—Ç—å</button>
                </div>
                <button class="btn btn-secondary" onclick="app.logout()">–í—ã–π—Ç–∏</button>
            </div>
        </section>

        <!-- Payment Modal -->
        <div id="payment-modal" class="modal-overlay" onclick="if(event.target === this) app.closePayment()">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title">–û–ø–ª–∞—Ç–∞</h3>
                    <button class="close-btn" onclick="app.closePayment()">&times;</button>
                </div>
                <div class="price-block">
                    <div class="price-tag">299 ‚ÇΩ</div>
                    <div class="price-period">–≤ –º–µ—Å—è—Ü</div>
                </div>
                <form onsubmit="event.preventDefault(); app.processPayment();">
                    <div class="form-group">
                        <label>–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã</label>
                        <input type="text" placeholder="0000 0000 0000 0000" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>–°—Ä–æ–∫</label>
                            <input type="text" placeholder="MM/YY" required>
                        </div>
                        <div class="form-group">
                            <label>CVC</label>
                            <input type="text" placeholder="123" required>
                        </div>
                    </div>
                    <button type="submit" class="btn btn-gold">–û–ø–ª–∞—Ç–∏—Ç—å</button>
                </form>
                <p class="demo-hint">–î–µ–º–æ-—Ä–µ–∂–∏–º</p>
            </div>
        </div>
        
        <!-- Screen: Team Profile -->
        <section id="screen-team" class="screen">
            <div class="container">
                <button class="back-btn" onclick="teamModule.back()">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
                </button>

                <div class="team-profile-header">
                    <div class="team-profile-avatar" id="team-profile-avatar">üê≤</div>
                    <h2 class="team-profile-name" id="team-profile-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</h2>
                    <p class="team-profile-city" id="team-profile-city">–ì–æ—Ä–æ–¥ ‚Ä¢ –í–∏–¥ —Å–ø–æ—Ä—Ç–∞</p>
                    
                    <div class="team-actions" id="team-actions">
                        <button class="btn btn-challenge" onclick="teamModule.challenge()">
                            <i class="fas fa-fire"></i> –ë—Ä–æ—Å–∏—Ç—å –≤—ã–∑–æ–≤
                        </button>
                    </div>
                </div>

                <div class="team-stats-grid">
                    <div class="stat-box">
                        <div class="stat-number" id="team-stat-wins">0</div>
                        <div class="stat-label">–ü–æ–±–µ–¥—ã</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number loss" id="team-stat-losses">0</div>
                        <div class="stat-label">–ü–æ—Ä–∞–∂–µ–Ω–∏—è</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-number" id="team-stat-winrate">0%</div>
                        <div class="stat-label">–í–∏–Ω—Ä–µ–π—Ç</div>
                    </div>
                </div>

                <div class="team-section">
                    <h3 class="section-subtitle">–°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã</h3>
                    <div class="team-roster" id="team-roster">
                    </div>
                </div>

                <div class="team-section">
                    <h3 class="section-subtitle">–ò—Å—Ç–æ—Ä–∏—è –º–∞—Ç—á–µ–π</h3>
                    <div class="team-match-history" id="team-match-history">
                    </div>
                </div>
            </div>
        </section>
        
         <!-- Screen: Team Edit -->
        <section id="screen-team-edit" class="screen">
            <div class="container">
                <button class="back-btn" onclick="screenManager.show('screen-teams')">
                    <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥ –∫ –∫–æ–º–∞–Ω–¥–∞–º
                </button>

                <h2 class="section-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</h2>

                <div class="form-section">
                    <h3 class="form-title">–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h3>
                    
                    <div class="form-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã</label>
                        <input type="text" id="edit-team-name" maxlength="30">
                        <div id="name-change-info" style="margin-top: 8px; font-size: 0.85rem;"></div>
                        <button class="btn btn-secondary" id="change-name-btn" style="margin-top: 10px; font-size: 0.9rem;">
                            –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–º–µ–Ω—ã
                        </button>
                    </div>

                    <div class="form-group avatar-group" style="margin-top: 20px;">
                        <label>–≠–º–æ–¥–∑–∏/–ò–∫–æ–Ω–∫–∞</label>
                        <input type="text" id="edit-team-avatar" maxlength="2" style="font-size: 2rem; text-align: center;">
                    </div>
                </div>

                <div class="form-section">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3 class="form-title" style="margin: 0;">–°–æ—Å—Ç–∞–≤ –∫–æ–º–∞–Ω–¥—ã</h3>
                        <button class="btn btn-primary" style="width: auto; padding: 10px 20px; font-size: 0.9rem;" onclick="teamEditModule.showAddPlayerForm()">
                            <i class="fas fa-plus"></i> –ò–≥—Ä–æ–∫
                        </button>
                    </div>

                    <div id="edit-roster-list" class="edit-roster-list">
                    </div>
                </div>

                <button class="btn btn-primary" onclick="teamEditModule.saveTeamChanges()" style="margin-bottom: 20px;">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
            </div>

           <div id="player-form-modal" class="modal-overlay hidden" onclick="if(event.target === this) teamEditModule.hidePlayerForm()">
                <div class="modal-content">
                    <h3 id="player-form-title" style="margin-bottom: 20px; font-family: var(--font-display);">–ù–æ–≤—ã–π –∏–≥—Ä–æ–∫</h3>
                    
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div class="photo-upload" onclick="document.getElementById('player-photo-input').click()">
                            <div id="player-photo-preview">
                                <i class="fas fa-user"></i>
                            </div>
                            <div class="photo-upload-hint">
                                <i class="fas fa-camera"></i>
                                <span>–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                            </div>
                        </div>
                        <input type="file" id="player-photo-input" accept="image/*" style="display: none;" onchange="teamEditModule.handlePhotoUpload(event)">
                    </div>

                    <div class="form-group">
                        <label>–§–ò–û</label>
                        <input type="text" id="player-name-input" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>–ù–æ–º–µ—Ä</label>
                            <input type="number" id="player-number-input" placeholder="10" min="1" max="99" required>
                        </div>
                        <div class="form-group">
                            <label>–ü–æ–∑–∏—Ü–∏—è</label>
                            <input type="text" id="player-role-input" placeholder="–ù–∞–ø–∞–¥–∞—é—â–∏–π">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>–û–ø–∏—Å–∞–Ω–∏–µ/–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è</label>
                        <textarea id="player-info-input" rows="3" placeholder="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∏–≥—Ä–æ–∫–µ..."></textarea>
                    </div>

                    <button class="btn btn-primary" onclick="teamEditModule.savePlayer()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    <button class="btn btn-secondary" onclick="teamEditModule.hidePlayerForm()" style="margin-top: 10px;">–û—Ç–º–µ–Ω–∞</button>
                </div>
            </div>
        </section>
        
		<!-- Screen: Match Edit -->
<section id="screen-match-edit" class="screen">
    <div class="container">
        <button class="back-btn" onclick="matchEditModule.back()">
            <i class="fas fa-arrow-left"></i> –ù–∞–∑–∞–¥
        </button>

        <h2 class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–µ–º</h2>

        <div class="form-section">
    <!-- –°—Ç–∞—Ç—É—Å –º–∞—Ç—á–∞ -->
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <span class="match-status" id="edit-match-status-badge">–°–ö–û–†–û</span>
        <span class="sport-badge" id="edit-match-sport">
            <i class="fas fa-futbol"></i> –§–£–¢–ë–û–õ
        </span>
    </div>

    <!-- –ö–æ–º–∞–Ω–¥—ã –∏ —Å—á–µ—Ç -->
    <div class="score-editor" style="margin-bottom: 25px;">
                <div class="score-teams">
                    <div class="score-team">
                        <div class="team-avatar large" id="edit-match-team1-avatar">‚öΩ</div>
                        <div class="team-name" id="edit-match-team1-name">–ö–æ–º–∞–Ω–¥–∞ 1</div>
                        <div class="score-input-container">
                            <button class="score-btn minus" onclick="matchEditModule.adjustScore(-1, 1)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" 
                                   id="edit-match-score1" 
                                   class="score-input"
                                   min="0" 
                                   max="99"
                                   onchange="matchEditModule.updateScore()"
                                   oninput="matchEditModule.updateUIByStatus()">
                            <button class="score-btn plus" onclick="matchEditModule.adjustScore(1, 1)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="vs" style="font-size: 1.5rem; color: var(--accent-pink);">VS</div>
                    
                    <div class="score-team">
                        <div class="team-avatar large" id="edit-match-team2-avatar">‚öΩ</div>
                        <div class="team-name" id="edit-match-team2-name">–ö–æ–º–∞–Ω–¥–∞ 2</div>
                        <div class="score-input-container">
                            <button class="score-btn minus" onclick="matchEditModule.adjustScore(-1, 2)">
                                <i class="fas fa-minus"></i>
                            </button>
                            <input type="number" 
                                   id="edit-match-score2" 
                                   class="score-input"
                                   min="0" 
                                   max="99"
                                   onchange="matchEditModule.updateScore()"
                                   oninput="matchEditModule.updateUIByStatus()">
                            <button class="score-btn plus" onclick="matchEditModule.adjustScore(1, 2)">
                                <i class="fas fa-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div style="text-align: center; margin-top: 10px;">
                    <button class="btn btn-secondary" onclick="matchEditModule.updateScore()" style="width: auto; padding: 8px 16px;">
                        <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—á–µ—Ç
                    </button>
                </div>
            </div>

            <!-- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è -->
    <div id="edit-match-warnings" class="warnings-container hidden" style="margin-bottom: 20px;"></div>
<!-- –ö–ù–û–ü–ö–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–¢–¨ –ú–ê–¢–ß (–í–°–ï–ì–î–ê –í–ò–î–ù–ê –ï–°–õ–ò –ï–°–¢–¨ –ü–†–ê–í–ê) -->
    <div class="match-actions" style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
        <button class="btn btn-primary" 
                id="edit-match-edit-btn"
                onclick="matchEditModule.startEditing()">
            <i class="fas fa-pen"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç—á
        </button>
        
        <button class="btn btn-success" 
                id="finish-match-btn"
                onclick="matchEditModule.updateStatus('finished')"
                style="display: none;">
            <i class="fas fa-flag-checkered"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∞—Ç—á
        </button>
        
        <button class="btn btn-danger" 
                id="cancel-match-btn"
                onclick="matchEditModule.cancelMatch()"
                style="display: none;">
            <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∏—Ç—å –º–∞—Ç—á
        </button>
        
        <button class="btn btn-warning" 
                id="resume-match-btn"
                onclick="matchEditModule.resumeMatch()"
                style="display: none;">
            <i class="fas fa-play"></i> –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –º–∞—Ç—á
        </button>
    </div>
    <!-- –ö–û–ù–¢–ï–ô–ù–ï–† –î–õ–Ø –ü–û–õ–ï–ô –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø (–°–ö–†–´–¢ –ü–û –£–ú–û–õ–ß–ê–ù–ò–Æ) -->
    <div id="edit-match-fields" class="hidden">
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–∞—è) -->
        <div id="edit-match-controls">
            <!-- –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–ª–µ —Ñ–æ—Ä–º–∞—Ç–∞ –∏–≥—Ä—ã -->
            <div class="form-group">
                <label>–§–æ—Ä–º–∞—Ç –∏–≥—Ä—ã</label>
                <select id="edit-match-format" disabled>
                    <option value="2x2">2 –Ω–∞ 2</option>
                    <option value="3x3">3 –Ω–∞ 3</option>
                    <option value="4x4">4 –Ω–∞ 4</option>
                    <option value="5x5">5 –Ω–∞ 5</option>
                    <option value="7x7">7 –Ω–∞ 7</option>
                    <option value="11x11">11 –Ω–∞ 11</option>
                </select>
            </div>

            <div class="form-group">
                <label>–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è</label>
                <input type="datetime-local" 
                       id="edit-match-datetime" 
                       disabled
                       onchange="matchEditModule.updateUIByStatus()">
            </div>

            <div class="form-group">
                <label>–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è</label>
                <div style="display: flex; gap: 8px;">
                    <input type="text" 
                           id="edit-match-location" 
                           placeholder="–°—Ç–∞–¥–∏–æ–Ω"
                           disabled
                           style="flex: 1;">
                    <button type="button" 
                            class="btn btn-secondary" 
                            id="edit-match-location-btn"
                            onclick="matchEditModule.openMapForLocation()"
                            style="width: auto; padding: 10px 15px; display: none;">
                        <i class="fas fa-map-marker-alt"></i>
                    </button>
                </div>
            </div>

            <div class="form-group">
                <label>–°—Ç–∞—Ç—É—Å –º–∞—Ç—á–∞</label>
                <select id="edit-match-status" disabled onchange="matchEditModule.updateUIByStatus()">
                    <option value="upcoming">–ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–π</option>
                    <option value="live">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                    <option value="finished">–ó–∞–≤–µ—Ä—à–µ–Ω</option>
                    <option value="cancelled">–û—Ç–º–µ–Ω–µ–Ω</option>
                </select>
            </div>

            <!-- –°–∫—Ä—ã—Ç—ã–µ –ø–æ–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç -->
                <input type="hidden" id="edit-match-lat">
                <input type="hidden" id="edit-match-lng">
            </div>

            <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
            <div class="match-actions" style="display: flex; flex-direction: column; gap: 10px; margin-top: 20px;">
                <button class="btn btn-primary" 
                        id="edit-match-edit-btn"
                        onclick="matchEditModule.startEditing()">
                    <i class="fas fa-pen"></i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ç—á
                </button>
                
                <button class="btn btn-success" 
                        id="finish-match-btn"
                        onclick="matchEditModule.updateStatus('finished')"
                        style="display: none;">
                    <i class="fas fa-flag-checkered"></i> –ó–∞–≤–µ—Ä—à–∏—Ç—å –º–∞—Ç—á
                </button>
                
                <button class="btn btn-danger" 
                        id="cancel-match-btn"
                        onclick="matchEditModule.cancelMatch()"
                        style="display: none;">
                    <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∏—Ç—å –º–∞—Ç—á
                </button>
                
                <button class="btn btn-warning" 
                        id="resume-match-btn"
                        onclick="matchEditModule.resumeMatch()"
                        style="display: none;">
                    <i class="fas fa-play"></i> –í–æ–∑–æ–±–Ω–æ–≤–∏—Ç—å –º–∞—Ç—á
                </button>
                
                <button class="btn btn-primary" 
                        id="edit-match-save-btn"
                        onclick="matchEditModule.saveMatchChanges()"
                        style="display: none;">
                    <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
                </button>
                
                <button class="btn btn-secondary" 
                        id="edit-match-cancel-btn"
                        onclick="matchEditModule.cancelEditing()"
                        style="display: none;">
                    <i class="fas fa-times"></i> –û—Ç–º–µ–Ω–∏—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
                </button>
            </div>
        </div>
    </div>
</section>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –≤—ã–±–æ—Ä–∞ –Ω–∞ –∫–∞—Ä—Ç–µ -->
	<div id="location-picker-modal" class="modal-overlay hidden">
    <div class="modal-content" style="width: 95%; max-width: 600px; padding: 0; border-radius: 20px; overflow: hidden; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);">
        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º -->
        <div style="background: linear-gradient(135deg, var(--accent-green), var(--accent-blue)); padding: 20px 24px;">
            <div style="display: flex; align-items: center; justify-content: space-between;">
                <div>
                    <h3 class="modal-title" style="font-size: 1.2rem; margin: 0; color: #000; font-weight: 700;">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ—Å—Ç–æ –Ω–∞ –∫–∞—Ä—Ç–µ</h3>
                    
                </div>
                <button class="close-btn" onclick="app.closeLocationPicker()" 
                        style="background: rgba(0, 0, 0, 0.2); color: #000; border: none; width: 36px; height: 36px; border-radius: 50%;">
                    &times;
                </button>
            </div>
        </div>

        <div style="background: var(--bg-card);">
            <!-- –ö–∞—Ä—Ç–∞ -->
            <div id="location-map" class="map-container" 
                 style="height: 250px; margin: 0; border: none; border-bottom: 1px solid var(--border-color); border-radius: 0;"></div>
            
            <!-- –§–æ—Ä–º–∞ –ø–æ–¥ –∫–∞—Ä—Ç–æ–π (–æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è) -->
<div style="padding: 24px;">
    
    
    <div class="form-group" style="margin-bottom: 20px;">
        <label style="font-size: 0.9rem; margin-bottom: 8px; display: block; color: var(--text-secondary); font-weight: 500;">
            <i class="fas fa-tag" style="margin-right: 8px; color: var(--accent-blue);"></i>
            –ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞
        </label>
        <input type="text" id="location-name" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –°—Ç–∞–¥–∏–æ–Ω '–ë–µ–ª–∫–∏–Ω–æ'" 
               class="modal-input">
    </div>
    
    <div class="form-group" style="margin-bottom: 20px;">
        <label style="font-size: 0.9rem; margin-bottom: 8px; display: block; color: var(--text-secondary); font-weight: 500;">
            <i class="fas fa-road" style="margin-right: 8px; color: var(--accent-blue);"></i>
            –ê–¥—Ä–µ—Å
        </label>
        <textarea id="location-address" rows="2" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, —Ä–∞–π–æ–Ω..." 
                  class="modal-textarea"></textarea>
    </div>
    
    <!-- –ö–Ω–æ–ø–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è -->
    <div style="display: flex; gap: 12px; margin-top: 28px;">
        <button class="btn btn-primary" onclick="app.confirmLocation()" 
                style="flex: 1; padding: 14px; font-size: 1rem; border-radius: 12px; background: linear-gradient(135deg, var(--accent-green), #00cc6a); color: #000; border: none; font-weight: 700; box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);">
            <i class="fas fa-check-circle" style="margin-right: 8px;"></i>–í—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ
        </button>
        <button class="btn btn-secondary" onclick="app.closeLocationPicker()" 
                style="flex: 1; padding: 14px; font-size: 1rem; border-radius: 12px; background: transparent; border: 2px solid var(--border); color: var(--text-secondary); font-weight: 600;">
            <i class="fas fa-times" style="margin-right: 8px;"></i>–û—Ç–º–µ–Ω–∞
        </button>
    </div>
    
    <div style="margin-top: 20px; padding: 12px; background: rgba(0, 204, 255, 0.05); border-radius: 10px; text-align: center;">
        <p style="color: var(--text-secondary); font-size: 0.8rem; margin: 0; line-height: 1.4;">
            <i class="fas fa-lightbulb" style="color: var(--accent-blue); margin-right: 6px;"></i>
            –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å –º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –º–∞—Ç—á–∞
        </p>
    </div>
</div>
        </div>
    </div>
</div>

            
		
    </main>

   <nav id="bottom-nav" class="bottom-nav hidden">
    <button type="button" class="nav-item" data-screen="main" onclick="app.showMain()">
        <i class="fas fa-calendar-alt"></i>
        <span>–ú–∞—Ç—á–∏</span>
    </button>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –ö–æ–º–∞–Ω–¥—ã - —Ç–æ–ª—å–∫–æ –¥–ª—è PRO -->
    <button type="button" class="nav-item" id="nav-teams-btn" data-screen="teams" onclick="app.showTeams()">
        <i class="fas fa-users"></i>
        <span>–ö–æ–º–∞–Ω–¥—ã</span>
    </button>
    
    <!-- –ö–Ω–æ–ø–∫–∞ –°–æ–∑–¥–∞—Ç—å - —Ç–æ–ª—å–∫–æ –¥–ª—è PRO -->
    <button type="button" class="nav-item nav-item-create" id="nav-create-btn" data-screen="create" onclick="app.showCreateMatch()">
        <i class="fas fa-plus"></i>
        <span>–°–æ–∑–¥–∞—Ç—å</span>
    </button>
    
    <button type="button" class="nav-item" data-screen="hub" onclick="app.showHub()">
        <i class="fas fa-compass"></i>
        <span>–•–∞–±</span>
    </button>
    
    <button type="button" class="nav-item" data-screen="profile" onclick="app.showProfile()">
        <i class="fas fa-user"></i>
        <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
</nav>
	<script src="./js/supabase-client.js"></script>
	<script src="./js/data.js"></script>
	<script src="./js/utils.js"></script>
	<script src="./js/screens.js"></script>
	<script src="./js/team.js"></script>
	<script src="./js/team-edit.js"></script>
	<script src="./js/match-edit.js"></script>
	<script src="./js/app.js"></script>
	<script src="./js/auth.js"></script>
	<script src="./js/app-modules/init.js"></script>
	<script src="./js/app-modules/navigation.js"></script>
	<script src="./js/app-modules/matches.js"></script>
	<script src="./js/app-modules/teams.js"></script>
	<script src="./js/app-modules/events.js"></script>
	<script src="./js/app-modules/comments.js"></script>
	<script src="./js/app-modules/map.js"></script>
</body>
</html>